<!doctype html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0, maximum-scale=1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta property="og:title" content={{.LinkDesc}}/>
    <meta property="og:description" content="Build Your Metaverse" />
    <meta property="al:android:app_name" content="Plan 3D">
    <meta property="al:android:package" content="org.plansystems.plan">
    <meta property="al:android:url" content="plan://">
    <!-- The iOS meta data is used by apple for AASA -->
    <meta property="al:ios:app_name" content="plan-3d">
    <meta property="al:ios:app_store_id" content="1560702114">
    <meta property="al:ios:url" content="plan://">
    <meta property="og:url" content="https://spaces.plan.tools/">
    <meta property="og:image" content="https://plan.tools/wp-content/uploads/2016/08/plan6.jpg" />
    <title>{{.LinkDesc}}</title>
    <style>@media screen and (max-device-width:480px){body{-webkit-text-size-adjust:none}}</style>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/stylesheet.css" type='text/css'>
</head>
<body>
<div>
<img src="/PLAN_multiplatform_lightgrey.jpeg" alt="PLAN 3D Download" width=100% height=auto>
  <p></p>
  <a href="{{.AppDownload}}"><button class="dlbutton">Download PLAN 3D for {{.AppOS}}</button></a>
  <p>
  1. Download then open PLAN 3D<br>
  2. Press "Crates" and add 3D content<br>
  3. Enter a Space or open a Space link (e.g. https://spaces.plan.tools/...)
  </p>
  <p>
    <a href="https://plan.tools/#download">Direct downloads from Plan.Tools<br>
    <img src="/mac-ios-win-android.jpg" alt="PLAN 3D" width=260px height=64px></a>
  </p>
  </div>
    <script>
      //Redirect with setTimeout doesn't work on all platforms
      //setTimeout(function () { window.location = '{{.AppDownload}}' }, 5000);
      window.location = '{{.AppLink}}'; 
    </script>
    <!-- There is some useful stuff in the below script
    <script>
      var now = new Date().valueOf();
      setTimeout(function () {
        // time stamp comaprison prevents redirecting to app store a 2nd time
        if (new Date().valueOf() - now > 100) {
          window.close() ;  // scenario #4
          // old way - "return" - but this would just leave a blank page in users browser
          //return;  
        }
        if (isIOS == 1) {
          // still can't avoid the "invalid address" safari pops up
          // but at least we can explain it to users
          var msg = "'invalid address' = PLAN 3D NOT DETECTED.\n\nREDIRECTING TO APP STORE" ;
        } else {
          var msg = "PLAN 3D NOT NOT DETECTED\n\nREDIRECTING TO APP STORE" ;
        }
        if (window.confirm(msg)) {
          window.location = 'https://plan-systems.org/plan-3d/__installers/PLAN_3D.dmg';
          // scenario #2 - will leave a blank tab in browser
        } else {
          window.close() ;  // scenario #3
        }
      }, 5000);
      window.location = 'plan://plan.local/j08pf5s386hhzb0ph1jetwgurxer9r9r44x7vnfhr1jps1fe';  
      // scenario #1 - this will leave a blank tab
      </script>
    -->
</body>
</html>